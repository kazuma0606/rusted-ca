# ğŸ¦€ True Rusted Clean Architecture (çœŸã®Rusted CA)

## ğŸ¯ è¨­è¨ˆå“²å­¦

**ã€ŒRustã®ç‰¹æ€§ã‚’æ´»ã‹ã—ã€CAã®ç¾ã—ã•ã‚’æœ€å¤§åŒ–ã™ã‚‹ã€**

- âœ… **Lightning Clean Commerce ã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³**ã‚’åŸºç›¤ã¨ã™ã‚‹
- âœ… **In-Memory CQRS**ã§CAã®ç¾ã—ã•ã«é›†ä¸­
- âœ… **å±¤åˆ¥Resultå‹**ã§ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿæºã‚’æ˜ç¢ºåŒ–
- âœ… **ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åˆ¶ç´„**ã«ã‚ˆã‚‹å‹å®‰å…¨æ€§ã®å¾¹åº•
- âœ… **Value Objects**ã«ã‚ˆã‚‹ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«å®Ÿè£…

---

## âœ… 2025/7/10æ™‚ç‚¹ã®å®Ÿè£…çŠ¶æ³

- **CQRS + Clean Architecture**ã‚’Rustã§å®Ÿè£…
- **In-Memory SQLite**ã«ã‚ˆã‚‹æ°¸ç¶šåŒ–
- **DIï¼ˆä¾å­˜æ€§æ³¨å…¥ï¼‰**ã¯DIã‚³ãƒ³ãƒ†ãƒŠã§ä¸€å…ƒç®¡ç†
- **å…¨CRUDï¼ˆCreate, Read, Update, Deleteï¼‰API**ãŒå‹•ä½œ
- **å…¨ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯curlãƒ†ã‚¹ãƒˆã§æ­£å¸¸å‹•ä½œç¢ºèªæ¸ˆã¿ï¼ˆ2025/7/10ï¼‰**

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å…¨ä½“å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                           â”‚
â”‚  HTTP Request â†’ Controller â†’ PresentationResult<Response>       â”‚
â”‚  PresentationError (400, 401, 403, 404, 500)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   Application Layer                             â”‚
â”‚  Command/Query â†’ UseCase â†’ ApplicationResult<DTO>              â”‚
â”‚  ApplicationError (UserNotFound, EmailExists, Validation...)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Domain Layer                                â”‚
â”‚  Value Objects â†’ Entity â†’ DomainResult<Entity>                 â”‚
â”‚  DomainError (InvalidEmail, BusinessRuleViolation...)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                Infrastructure Layer                             â”‚
â”‚  In-Memory CQRS â†’ Repository â†’ InfrastructureResult<Data>      â”‚
â”‚  InfrastructureError (Database, Network, ExternalService...)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ CQRS Data Flow

### Command Side (Write)
```
HTTP Request â†’ CreateUserRequest â†’ CreateUserCommand 
    â†“
UseCase<T: CommandRepository, U: IdGenerator> 
    â†“
User Entity (Value Objects) â†’ CommandRepository 
    â†“
In-Memory Normalized Store â†’ UserResponse
```

### Query Side (Read)
```
HTTP Request â†’ GetUserQuery 
    â†“
UseCase<T: QueryRepository> 
    â†“
QueryRepository â†’ In-Memory Denormalized Store 
    â†“
UserResponseDto â†’ HTTP Response
```

---

## ğŸš€ å®Ÿè£…æ¸ˆã¿APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹                  | æ¦‚è¦             |
|----------|----------------------|------------------|
| POST     | /api/users           | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ     |
| GET      | /api/users/{id}      | ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—     |
| PUT      | /api/users/{id}      | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°     |
| DELETE   | /api/users/{id}      | ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤     |

---

## ğŸ” èªè¨¼æ–¹å¼ãƒ»èªè¨¼ã‚¿ã‚¤ãƒŸãƒ³ã‚°

### èªè¨¼ã®ä»•çµ„ã¿

- æœ¬APIã¯**JWTï¼ˆJSON Web Tokenï¼‰ã«ã‚ˆã‚‹èªè¨¼**ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚
- èªè¨¼ã¯`src/shared/middleware/auth_middleware.rs`ã§å®Ÿè£…ã•ã‚Œã¦ãŠã‚Šã€**Axumã®extractorå‹ï¼ˆAuthenticatedUserãªã©ï¼‰**ã¨ã—ã¦å„ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§åˆ©ç”¨ã•ã‚Œã¾ã™ã€‚
- JWTã®ç™ºè¡Œã¯`/api/auth/login`ã§è¡Œã„ã€**.envã®`AUTH_USER`/`AUTH_PASS`ã¨ä¸€è‡´ã—ãŸå ´åˆã®ã¿ãƒˆãƒ¼ã‚¯ãƒ³ãŒç™ºè¡Œ**ã•ã‚Œã¾ã™ã€‚
- å„APIãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã€`Authorization: Bearer <JWT_TOKEN>`ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ä»˜ä¸ã™ã‚‹ã“ã¨ã§èªè¨¼ãŒè¡Œã‚ã‚Œã¾ã™ã€‚

#### èªè¨¼ã®æµã‚Œ

1. **ãƒ­ã‚°ã‚¤ãƒ³**:  
   `/api/auth/login`ã«`{ "username": "...", "password": "..." }`ã§POST  
   â†’ æˆåŠŸæ™‚ã«`access_token`ã¨`refresh_token`ãŒè¿”ã‚‹

2. **èªè¨¼ä»˜ãAPIå‘¼ã³å‡ºã—**:  
   `Authorization: Bearer <access_token>`ã‚’ä»˜ä¸ã—ã¦å„APIã‚’å‘¼ã³å‡ºã™  
   â†’ ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æ€§ãƒ»æœ‰åŠ¹æœŸé™ãƒ»ãƒ­ãƒ¼ãƒ«ï¼ˆroleï¼‰ã‚’extractorã§è‡ªå‹•åˆ¤å®š

3. **èªè¨¼å¤±æ•—æ™‚**:  
   401/403ã‚¨ãƒ©ãƒ¼ï¼ˆ`INVALID_TOKEN`ã‚„`INSUFFICIENT_PERMISSIONS`ç­‰ï¼‰ãŒè¿”ã‚‹

#### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»èªè¨¼ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **JWTèªè¨¼ãƒ­ã‚¸ãƒƒã‚¯**:  
  `src/shared/middleware/auth_middleware.rs`  
  - `AuthenticatedUser`å‹: é€šå¸¸èªè¨¼
  - `AdminUser`å‹: ç®¡ç†è€…èªè¨¼
  - `SuperAdminUser`å‹: ã‚¹ãƒ¼ãƒ‘ç®¡ç†è€…èªè¨¼
  - `OptionalAuth`å‹: ä»»æ„èªè¨¼

- **èªè¨¼ã‚¿ã‚¤ãƒŸãƒ³ã‚°**:  
  - å„ãƒ«ãƒ¼ã‚¿ãƒ¼ï¼ˆä¾‹: `src/presentation/router/user_router.rs`ï¼‰ã§extractorå‹ã‚’ã‚·ã‚°ãƒãƒãƒ£ã«æŒ‡å®š  
  - ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã®å¼•æ•°ã§`auth: AuthenticatedUser`ç­‰ã‚’å—ã‘å–ã‚‹ã“ã¨ã§**ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ¯ã«è‡ªå‹•èªè¨¼**

---

## ğŸš© èªè¨¼ãŒå¿…è¦ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§

| ãƒ¡ã‚½ãƒƒãƒ‰ | ãƒ‘ã‚¹                | èªè¨¼è¦å¦         | å‚™è€ƒ                       |
|----------|--------------------|------------------|----------------------------|
| POST     | /api/users         | å¿…é ˆï¼ˆJWTï¼‰      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ               |
| GET      | /api/users/{id}    | å¿…é ˆï¼ˆJWTï¼‰      | ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—               |
| PUT      | /api/users/{id}    | å¿…é ˆï¼ˆJWTï¼‰      | ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°               |
| DELETE   | /api/users/{id}    | å¿…é ˆï¼ˆJWTï¼‰      | ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤               |
| POST     | /api/auth/login    | ä¸è¦             | JWTç™ºè¡Œï¼ˆãƒ­ã‚°ã‚¤ãƒ³ï¼‰        |

> **æ³¨æ„:**  
> - `/api/users`ç³»ã¯**å…¨ã¦JWTèªè¨¼å¿…é ˆ**ã§ã™ã€‚  
> - `Authorization: Bearer <access_token>`ãƒ˜ãƒƒãƒ€ãƒ¼ãŒå¿…è¦ã§ã™ã€‚  
> - `/api/auth/login`ã®ã¿èªè¨¼ä¸è¦ã§ã™ï¼ˆã“ã“ã§ãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ï¼‰ã€‚

---

### curlä¾‹ï¼ˆèªè¨¼ä»˜ãï¼‰

```sh
# 1. ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦JWTå–å¾—
curl -X POST http://localhost:3000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "your_user", "password": "your_pass"}'

# 2. èªè¨¼ä»˜ãã§ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—
curl http://localhost:3000/api/users/{USER_ID} \
  -H "Authorization: Bearer <access_token>"
```

---

### è£œè¶³

- JWTã®`role`ã«ã‚ˆã‚Šå°†æ¥çš„ã«**ç®¡ç†è€…å°‚ç”¨API**ï¼ˆä¾‹: `/api/metrics`ç­‰ï¼‰ã‚‚åˆ¶å¾¡å¯èƒ½ã§ã™ã€‚
- èªè¨¼å¤±æ•—æ™‚ã¯`401 Unauthorized`ã‚„`403 Forbidden`ãŒè¿”ã‚Šã¾ã™ã€‚

---

## ğŸ§ª curlã‚³ãƒãƒ³ãƒ‰ã«ã‚ˆã‚‹æ¤œè¨¼æ–¹æ³•

#### 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆ
```sh
curl -X POST http://localhost:3000/api/users \
  -H "Content-Type: application/json" \
  -d '{
    "email": "john.doe@example.com",
    "name": "John Doe",
    "password": "TestPassword123!",
    "phone": "+81-90-1111-2222",
    "birth_date": "1990-01-01"
  }'
```

#### 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼å–å¾—
```sh
curl http://localhost:3000/api/users/{USER_ID}
```

#### 3. ãƒ¦ãƒ¼ã‚¶ãƒ¼æ›´æ–°
```sh
curl -X PUT http://localhost:3000/api/users/{USER_ID} \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Updated User",
    "phone": "+81-90-3333-4444"
  }'
```

#### 4. ãƒ¦ãƒ¼ã‚¶ãƒ¼å‰Šé™¤ï¼ˆå‰Šé™¤ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¿”ã‚‹ï¼‰
```sh
curl -X DELETE http://localhost:3000/api/users/{USER_ID}
```
**ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹:**
```json
{
  "success": true,
  "data": {
    "id": "xxxx-xxxx-xxxx-xxxx",
    "email": "john.doe@example.com",
    "name": "John Doe",
    "phone": "+81-90-1111-2222",
    "birth_date": "1990-01-01",
    "created_at": "...",
    "updated_at": "..."
  },
  "message": "User deleted successfully",
  "request_id": "req_xxx",
  "processing_time_ms": 0
}
```

#### 5. å‰Šé™¤å¾Œã®å–å¾—ï¼ˆ404ã‚¨ãƒ©ãƒ¼ï¼‰
```sh
curl http://localhost:3000/api/users/{USER_ID}
```

---

## ğŸ† ãƒ†ã‚¹ãƒˆçµæœ

- 2025/7/10æ™‚ç‚¹ã§å…¨APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®curlãƒ†ã‚¹ãƒˆãŒ**å…¨ã¦æˆåŠŸ**ã—ã¦ã„ã¾ã™ã€‚

---

## ğŸ§© DIï¼ˆä¾å­˜æ€§æ³¨å…¥ï¼‰ãƒ»CQRSæˆ¦ç•¥

- **DIã‚³ãƒ³ãƒ†ãƒŠ**ã§å…¨ã¦ã®Repository/UseCase/Controllerã‚’ä¸€å…ƒç®¡ç†
- **Applicationå±¤**ã¯Repositoryã®ãƒˆãƒ¬ã‚¤ãƒˆã«ä¾å­˜ã—ã€ã‚¤ãƒ³ãƒ•ãƒ©å®Ÿè£…ã¯DIã§æ³¨å…¥
- **CQRS**ã¯Command/Queryã§Repository/UseCaseã‚’åˆ†é›¢
- **Axum**ã®ãƒ«ãƒ¼ã‚¿ãƒ¼ã¯Controllerã‚’DIçµŒç”±ã§å—ã‘å–ã‚Šã€å„APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ãƒãƒƒãƒ”ãƒ³ã‚°

---

## ğŸ—ºï¸ Mermaidå›³ï¼šDIã®ä¾å­˜æ–¹å‘

```mermaid
graph TD
    A[Axum Router] --> B[UserController]
    B --> C1[CreateUserUseCase]
    B --> C2[GetUserUseCase]
    B --> C3[UpdateUserUseCase]
    B --> C4[DeleteUserUseCase]
    C1 --> D1[UserCommandRepository]
    C1 --> D2[IdGenerator]
    C2 --> E1[UserQueryRepository]
    C3 --> D1
    C3 --> E1
    C4 --> D1
    C4 --> E1
    D1 & E1 --> F[SqliteConnection]
```

---

## ğŸ“‹ å®Œå…¨ãªå‹å®šç¾©

### å±¤åˆ¥Resultå‹
```rust
// Domain Layer
pub type DomainResult<T> = Result<T, DomainError>;

// Application Layer  
pub type ApplicationResult<T> = Result<T, ApplicationError>;

// Infrastructure Layer
pub type InfrastructureResult<T> = Result<T, InfrastructureError>;

// Presentation Layer
pub type PresentationResult<T> = Result<T, PresentationError>;
```

### ã‚¨ãƒ©ãƒ¼è‡ªå‹•å¤‰æ›ãƒã‚§ãƒ¼ãƒ³
```rust
DomainError â†’ ApplicationError â†’ PresentationError
InfrastructureError â†’ ApplicationError â†’ PresentationError
```

### ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åˆ¶ç´„ãƒ‘ã‚¿ãƒ¼ãƒ³
```rust
impl<T, U, V> CreateUserUsecaseInterface for CreateUserUseCase<T, U, V>
where
    T: UserCommandRepositoryInterface + Send + Sync,
    U: IdGeneratorInterface + Send + Sync,
    V: EmailServiceInterface + Send + Sync,
```

---

## ğŸ›ï¸ Layer Definitions

### Domain Layer
**è²¬å‹™**: ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã¨ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
```rust
// Value Objects (ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«)
Email(String)     // ãƒ¡ãƒ¼ãƒ«ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
UserName(String)  // åå‰ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
Password { hash } // ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒã‚·ãƒ¥åŒ–

// Entity (ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«é›†ç´„)
User {
    id: Uuid,
    email: Email,
    name: UserName,
    password: Password,
    // + ãƒ“ã‚¸ãƒã‚¹ãƒ¡ã‚½ãƒƒãƒ‰
}

// Repository Trait (ä¾å­˜æ€§é€†è»¢)
trait UserCommandRepositoryInterface
trait UserQueryRepositoryInterface
```

### Application Layer
**è²¬å‹™**: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã¨ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼
```rust
// Command/Query Objects
CreateUserCommand { email, name, password }
GetUserQuery { id }

// UseCase (ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼)
CreateUserUseCase<T, U, V> {
    command_repository: Arc<T>,
    id_generator: Arc<U>,
    email_service: Arc<V>,
}

// DTO (å±¤é–“ãƒ‡ãƒ¼ã‚¿è»¢é€)
CreateUserRequestDto â†’ CreateUserResponseDto
```

### Infrastructure Layer
**è²¬å‹™**: å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¥ç¶š
```rust
// In-Memory CQRS Implementation
InMemoryUserCommandRepository {
    // Writeæœ€é©åŒ–: æ­£è¦åŒ–ãƒ‡ãƒ¼ã‚¿
    store: HashMap<Uuid, User>,
    email_index: HashMap<String, Uuid>,
}

InMemoryUserQueryRepository {
    // Readæœ€é©åŒ–: éæ­£è¦åŒ–ãƒ‡ãƒ¼ã‚¿  
    read_models: HashMap<Uuid, UserReadModel>,
    search_index: HashMap<String, Vec<Uuid>>,
}
```

### Presentation Layer  
**è²¬å‹™**: HTTPå‡¦ç†ã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ›
```rust
// HTTP DTO
CreateUserRequest { email, name, password }
UserResponse { id, email, name, created_at }

// Controller
async fn create_user<T: CreateUserUsecaseInterface>(
    State(usecase): State<Arc<T>>,
    Json(request): Json<CreateUserRequest>,
) -> PresentationResult<Json<ApiResponse<UserResponse>>>
```

---

## ğŸ”§ DI Pattern (Lightningæ–¹å¼)

### ç›´æ¥æ³¨å…¥ãƒ‘ã‚¿ãƒ¼ãƒ³
```rust
async fn setup_dependencies() -> AppState {
    // Infrastructure Layer
    let command_repository = Arc::new(InMemoryUserCommandRepository::new());
    let query_repository = Arc::new(InMemoryUserQueryRepository::new());
    let id_generator = Arc::new(UuidGenerator::new());
    
    // Application Layer - ã‚¸ã‚§ãƒãƒªãƒƒã‚¯åˆ¶ç´„
    let create_user_usecase = Arc::new(CreateUserUseCase::new(
        command_repository.clone(),
        id_generator.clone(),
    ));
    
    let get_user_usecase = Arc::new(GetUserUseCase::new(
        query_repository.clone(),
    ));
    
    AppState {
        create_user_usecase,
        get_user_usecase,
    }
}
```

---

## ğŸ“ SOLID Principles Implementation

### Single Responsibility Principle
- **Controller**: HTTPå‡¦ç†ã®ã¿
- **UseCase**: ãƒ“ã‚¸ãƒã‚¹ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œã®ã¿  
- **Repository**: ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ã®ã¿
- **Entity**: ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ«ãƒ¼ãƒ«ã®ã¿

### Open/Closed Principle
- æ–°ã—ã„Repositoryå®Ÿè£…è¿½åŠ å¯èƒ½